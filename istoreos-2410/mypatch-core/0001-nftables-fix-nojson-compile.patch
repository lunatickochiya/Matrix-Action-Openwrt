From e952c722d54c29e00b8ce05f0dd1b8a2230cbe3d Mon Sep 17 00:00:00 2001
From: lunatickochiya <125438787@qq.com>
Date: Sun, 28 Dec 2025 20:11:39 +0800
Subject: [PATCH] nftables:fix nojson compile

---
 .../utils/nftables/patches/999-11-masq-fullcone-flag.patch  | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/package/network/utils/nftables/patches/999-11-masq-fullcone-flag.patch b/package/network/utils/nftables/patches/999-11-masq-fullcone-flag.patch
index 735e870198..beb1f302f7 100644
--- a/package/network/utils/nftables/patches/999-11-masq-fullcone-flag.patch
+++ b/package/network/utils/nftables/patches/999-11-masq-fullcone-flag.patch
@@ -75,7 +75,7 @@ diff --git a/src/expression.c b/src/expression.c
 index c0cb7f22..39d2821a 100644
 --- a/src/expression.c
 +++ b/src/expression.c
-@@ -803,6 +803,51 @@ struct expr *range_expr_alloc(const struct location *loc,
+@@ -803,6 +803,55 @@ struct expr *range_expr_alloc(const struct location *loc,
  	return expr;
  }
  
@@ -100,7 +100,11 @@ index c0cb7f22..39d2821a 100644
 +	.type		= EXPR_FULLCONE,
 +	.name		= "fullcone",
 +	.print		= fullcone_expr_print,
++#ifdef ENABLE_JSON
 +	.json		= fullcone_expr_json,
++#else
++    .json   = NULL,
++#endif
 +	.clone		= fullcone_expr_clone,
 +	.destroy	= fullcone_expr_destroy,
 +};
-- 
2.43.0

